ALTER TABLE [EngDataClassxEngDataCode] ADD [BccCodeId] int NOT NULL DEFAULT 0;

GO

ALTER TABLE [EngClass] ADD [SuperClassID] int NOT NULL DEFAULT 0;

GO

CREATE TABLE [BccCode] (
    [BccCodeId] int NOT NULL IDENTITY,
    [BccCodeDesc] nvarchar(max) NULL,
    CONSTRAINT [PK_BccCode] PRIMARY KEY ([BccCodeId])
);

GO

CREATE TABLE [SuperClass] (
    [SuperclassID] int NOT NULL IDENTITY,
    [SuperclassName] nvarchar(50) NOT NULL,
    [Superclassdescription] nvarchar(255) NOT NULL,
    CONSTRAINT [PK_SuperClass] PRIMARY KEY ([SuperclassID])
);

GO

CREATE INDEX [IX_EngDataClassxEngDataCode_BccCodeId] ON [EngDataClassxEngDataCode] ([BccCodeId]);

GO

CREATE INDEX [IX_EngClass_SuperClassID] ON [EngClass] ([SuperClassID]);

GO

CREATE UNIQUE INDEX [U_SuperClass] ON [SuperClass] ([SuperclassID]);

GO

ALTER TABLE [EngClass] ADD CONSTRAINT [FK_EngClass_SuperClass_SuperClassID] FOREIGN KEY ([SuperClassID]) REFERENCES [SuperClass] ([SuperclassID]) ON DELETE CASCADE;

GO

ALTER TABLE [EngDataClassxEngDataCode] ADD CONSTRAINT [FK_EngDataClassxEngDataCode_BccCode_BccCodeId] FOREIGN KEY ([BccCodeId]) REFERENCES [BccCode] ([BccCodeId]) ON DELETE CASCADE;

GO

INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230119062846_SuperClass', N'3.1.32');

GO

